jQuery.fn.extend({fieldFocus:function(n){return jQuery(this).each(function(){var t=jQuery(this);jQuery(this).click(function(){jQuery(this).find(".input:not([disabled]), .bootstrap-tagsinput input")&&(t.parents(".dbo_form, form").find("."+n).removeClass(n),t.find(".input_container:not(.view_only)").addClass(n),jQuery(this).find(".input:not([disabled])").is("textarea")===!1&&jQuery(this).find(".input:not([disabled])").focus()),jQuery(this).find(".input:not([disabled]), .bootstrap-tagsinput input").focus(function(){t.parents(".dbo_form, form").find("."+n).removeClass(n),t.find(".input_container:not(.view_only)").addClass(n),jQuery(this).find("select").click()})}),jQuery(this).find(".input:not([disabled]), .bootstrap-tagsinput input").focus(function(){t.parents(".dbo_form, form").find("."+n).removeClass(n),t.find(".input_container:not(.view_only)").addClass(n)}),jQuery(this).find(".input:not([disabled]), .bootstrap-tagsinput input").blur(function(){t.find(".input_container:not(.view_only)").removeClass(n)})})}}),jQuery.fn.extend({dboForms:function(){var n={formRow:"form_row",error:"error",container:"input_container",input:"input",onChangeHook:"onChangeHook",icon:"i.dbo",menu:"ui-menu",picker:"type_picker",placeholder:"placeholder",choice:"choice",hint:"hint",tagsinput:"bootstrap-tagsinput",hasHint:"input_container_with_hint",triggers:"input_triggers",hasTriggers:"input_container_with_btns",button:"btn",handle:"handle",hasValue:"value_set",disabled:"disabled",active:"active",focus:"focus",fullScreen:"full_screen"};debug=function(n,t){var e=window.location.toString().toLowerCase();return e.indexOf("debugforms")>-1?(void 0!==n&&(void 0!==t?console.debug("dbo.forms: "+n,t):console.debug("dbo.forms: "+n)),!0):void 0},error=function(n,t){var e=window.location.toString().toLowerCase();return e.indexOf("debugforms")>-1?(void 0!==n&&(void 0!==t?console.error("dbo.forms: "+n,t):console.error("dbo.forms: "+n)),!0):void 0},debug("intializing",null),this.find('[data-tooltip="true"]').tooltip(),this.find("."+n.formRow).fieldFocus(n.focus),this.find("."+n.container).not("."+n.button).each(function(t,e){var i=jQuery(e),o=i.outerWidth(),a=i.find("."+n.input),r=a.attr("type"),s=o,d=a.val(),u=jQuery(e).parent("."+n.formRow),l=a.attr("disabled"),c=i.find("."+n.hint),f=0,h=i.find("."+n.choice),b=i.find("."+n.triggers),p=0,m=i.find("."+n.placeholder),g=i.find("."+n.input+", ."+n.placeholder+", ."+n.choice+", ."+n.tagsinput),v=0;a.length>0?debug(n.container+" loop: input: ",a):error(n.container+' loop: no input with a class of "input" found in ',i),b.length&&(i.addClass(n.hasTriggers),p=b.outerWidth(),v=1),i.find("textarea").length&&(v=2),c.length&&(i.addClass(n.hasHint),f=c.outerWidth()),(c.length||b.length)&&(s=o-f-p-v),"number"===r&&(s-=5),g.css({width:s,"margin-left":f,"margin-right":p}),"disabled"===l&&u.addClass(n.disabled),""===d||null===d||"undefined"==typeof d||(debug(n.container+" loop: value ["+d+"] found, adding $css.hasVaue",null),u.addClass(n.hasValue),u.find('[data-event~="clear_input"]').fadeIn()),a.click(function(){debug(n.container+" loop: click detected, adding $css.hasVaue",null),u.addClass(n.hasValue),u.find('[data-event~="clear_input"]').fadeIn()}),a.blur(function(){""===jQuery(this).val()||null===jQuery(this).val()||"undefined"==typeof jQuery(this).val()?(u.removeClass(n.hasValue),u.find('[data-event~="clear_input"]').fadeOut(),debug("blur detected, no value, removing $css.hasVaue",jQuery(this))):(u.addClass(n.hasValue),u.find('[data-event~="clear_input"]').show(),debug("blur detected, has value, adding $css.hasVaue",jQuery(this)))}),u.find('[data-event~="clear_input"]').each(function(){var t=jQuery(this);t.hide(),t.click(function(){t.parents("."+n.container).find("."+n.input).val(""),t.parents(".form_row ").removeClass(n.hasValue)})})}),this.find('.input[type="email"]').unbind("change"),this.find('.input[type="email"]').change(function(){var t=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/,e=jQuery(this).val();t.test(e)?jQuery(this).parents("."+n.formRow).removeClass(n.error):jQuery(this).parents("."+n.formRow).addClass(n.error)}),this.find(".type_textarea").each(function(n,t){var e=jQuery(t),i=e.find("textarea")}),this.find(".type_toggle").each(function(t,e){var i=jQuery(e).find(".form_btn, ."+n.button).attr("data-toggle-from"),o=i,a=jQuery(e).find(".form_btn, ."+n.button).attr("data-toggle-to"),r=a,s=jQuery(e).find("."+n.input),d=jQuery(e).find(n.icon);debug(".type_toggle",jQuery(e)),jQuery(e).find(".form_btn, ."+n.button).attr("data-toggle-iconTo")&&(r=jQuery(e).find(".form_btn, ."+n.button).attr("data-toggle-iconTo")),jQuery(e).find(".form_btn, ."+n.button).attr("data-toggle-iconFrom")&&(o=jQuery(e).find(".form_btn, ."+n.button).attr("data-toggle-iconFrom"));var u=function c(){var n;l?(n=a,d.removeClass(o).addClass(r),debug(".type_toggle: changing to iconTo.",null)):(n=i,d.removeClass(r).addClass(o),debug(".type_toggle: changing to iconFrom.",null)),s.val()!==n&&(debug(".type_toggle: changing input from:"+s.val()+" to:"+n,null),s.val(n).change()),l=!l};jQuery(e).unbind("click"),jQuery(e).find("a.btn").bind("click",u);var l=!0;if(s.val()===i)var l=!1;u()}),this.find(".type_combo, .type_combined, .type_picker").each(function(t,e){var i=jQuery(e),o=i.find("."+n.input),a=i.find("."+n.onChangeHook),r=i.find(".menu > ul"),s=i.find("."+n.choice),d=i.find("."+n.container+", label, .form_btn, ."+n.button);o.is("textarea")&&(d=i.find("."+n.triggers+", label, .form_btn, ."+n.button));var u=i,l=!1,c=u.parent("."+n.formRow),f=u.find("."+n.container),h=f.width(),b=o.attr("id"),p=o.attr("name"),m=o.attr("type");debug("type_combo||type_combined||type_picker",o),201>h&&(h=200),i.is("."+n.picker)&&(f=u.find("."+n.container+", .form_btn, ."+n.button)),(o.is(":text")||o.is("textarea"))&&u.addClass("has-text-input"),c&&c.find("."+n.picker).length>1&&(l=!0),r.menu({focus:function(){u.addClass(n.focus).find("."+n.button).addClass(n.focus).find(n.icon).addClass(n.active),u.find("."+n.container).addClass(n.focus)},blur:function(){u.removeClass(n.focus).find("."+n.button).removeClass(n.focus).find(n.icon).removeClass(n.active),u.find("."+n.container).removeClass(n.focus)}}).css("width",h+"px").find("."+n.menu).css("width",h/2+"px"),d.unbind("click"),d.click(function(){return u.parents(".dbo_form, form").find("."+n.focus).removeClass(n.focus),u.addClass(n.focus).find("."+n.button).addClass(n.focus).find(n.icon).addClass(n.active),u.find("."+n.container).addClass(n.focus),jQuery("."+n.menu).hide(),r.show().menu().position({my:"left top",at:"left bottom",of:f,collision:"flipfit"}),$("body").css("cursor","pointer"),!1}),o.focus(function(){return u.addClass(n.focus).find("."+n.button).addClass(n.focus).find(n.icon).addClass(n.active),u.find("."+n.container).addClass(n.focus),jQuery("."+n.menu).fadeOut(),o.is("textarea")||r.show(),$("body").css("cursor","pointer"),!1}),o.blur(function(){return u.removeClass(n.focus).find("."+n.button).removeClass(n.focus).find(n.icon).removeClass(n.active),u.find("."+n.container).removeClass(n.focus),jQuery("."+n.menu).fadeOut(),!1});var g=function(){$("body").not(o).click(function(){jQuery("."+n.menu).fadeOut(),$("body").unbind("click"),$("body").css("cursor","")})};r.mouseleave(function(){g()}),i.mouseleave(function(){g()}),jQuery("body").unbind("click"),jQuery("body").click(function(n){r.not(r.has(n.target)).fadeOut(),$("body").css("cursor","")}),r.find("li a").unbind("click"),r.find("li a").click(function(){debug("click detected on li a",jQuery(this));var t=jQuery(this).attr("data-value"),e=jQuery(this).attr("data-choice"),d=jQuery(this).attr("data-icon-choice"),l=jQuery(this).html(),c=jQuery(this).text(),f=c.trim(),h="_blank"===t?"":t;s.length&&(e?s.html(e):d?(s.html(f),s.prepend('<i class="dbo '+d+'"></i>')):d&&e?(s.html(e),s.prepend('<i class="dbo '+d+'"></i>')):s.html(l));for(var b=0,p=this.attributes,m=p.length;m>b;b++){var g=p[b].nodeName;if("data-value-"===g.substring(0,11)&&"data-value-1"!==g&&"data-value-2"!==g){debug("custom data value:: "+g,null),g="."+g.substring(11,g.length),tokenValue=p[b].nodeValue;var v=i.find(g);v.length?(debug("custom data value: matching input found, setting value: "+tokenValue,null),v.val(tokenValue).change()):error('custom data value: Unable to find hidden input with class "'+g+'"',null)}}if(t?o.val(h).change():o.val(f).change(),"modal"===jQuery(this).data("toggle")){var y=jQuery(this).data("target");$(y).modal("show"),$(y).on("shown.bs.modal",function(n){$(y).find(".dbo_form").dboForms(),$(y).find(".dbo_form .input").first().focus(),$(y).find(".dbo_form .input").first().val(h)})}return a.length&&a.change(),r.hide(),$("body").css("cursor",""),u.removeClass(n.focus).addClass(n.hasValue).find("."+n.button).removeClass(n.focus).find(n.icon).removeClass(n.active),u.find("."+n.container).removeClass(n.focus),"_blank"===t&&(o.focus().val("").change(),u.addClass(n.focus).removeClass(n.hasValue),s.html(""),r.hide()),!1}),o.keypress(function(){u.hasClass(n.focus)||u.addClass(n.focus)})}),this.find(".type_confirm-password").each(function(t,e){var i=$(this),o=i.find("."+n.input),a=i.prev("."+n.formRow),r=a.find("."+n.input);o.blur(function(){o.val()!==r.val()?(i.addClass(n.error),a.addClass(n.error)):(i.removeClass(n.error),a.removeClass(n.error))})}),this.find(".type_date").each(function(t,e){var i=$(this),o=i.width(),a=i.find(n.input),r=i.find('[data-event~="jquery-ui_cal"]'),s=i.find("."+n.placeholder),d=i.find("."+n.triggers).width();a.datepicker({altField:a,altFormat:"mm-dd-yy",onSelect:function(){s.hide(),i.addClass(n.hasValue)}}).css("width",o-2*d-20),r.click(function(){return a.datepicker("show"),a.datepicker("refresh"),!1}),a.blur(function(){""===a.val()?s.show():i.addClass(n.hasValue)})})}}),$.fn.donetyping=function(n,t){t||(t=1e3);var e,i=function(t){e&&(e=null,n(t))};return this.each(function(){var n=$(this);n.on("keyup",function(){e&&clearTimeout(e),e=setTimeout(function(){i(n)},t)}).on("blur",function(){i(n)})}),this},jQuery(function(){jQuery(".dbo_form").dboForms()}),jQuery(window).resize(function(){jQuery(".dbo_form").dboForms()});